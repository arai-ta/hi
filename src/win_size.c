/**********************************************************************/
/*  hi - バイナリエディタ                                             */
/* ------------------------------------------------------------------ */
/* @(#) Author  : Kazunori Mita (mita@maroon.plala.or.jp)             */
/* @(#) Date    : Dec 1998                                            */
/* @(#) Version : 2.0                                                 */
/* @(#) Release : 1                                                   */
/* ------------------------------------------------------------------ */
/*    Copyright (c) 1998-2000 Kazunori Mita. All right reserved.      */
/**********************************************************************/
/* ================================================================== */
/* インクルードファイル                                               */
/* ================================================================== */
#include    <stdlib.h>
#include    <hi_std.h>

/**********************************************************************/
/*  サイズチェック関数 - win_size                                     */
/* ------------------------------------------------------------------ */
/* 関数概要                                                           */
/*   ウィンドウサイズを取得し、インターフェースエリアに設定する。     */
/**********************************************************************/
vd  win_size( struct ifa_s *ifa )       /* サイズチェック関数         */
{

    trace_start( ifa, "win_size" ) ;    /* トレース取得               */
/* ------------------------------------------------------------------ */
/* ウィンドウサイズチェック                                           */
/* ------------------------------------------------------------------ */
    if ( ( COLS < MIN_COLS ) || ( LINES < MIN_LINES ) ) {
                                        /* ウィンドウサイズ不足       */
        fprintf(stderr,"window-size is more 76x3\n") ;
                                        /* 障害メッセージ表示         */
        ifa->endflg = ABORT ;           /* 強制終了指示               */
        hi_end( ifa ) ;                 /* 終了処理                   */
        exit(1) ;                       /* end program                */
    }                                   /* end if                     */

/* ------------------------------------------------------------------ */
/* ウィンドウサイズ設定                                               */
/* ------------------------------------------------------------------ */
    ifa->columns = COLS ;               /* ウィンドウ:桁の設定        */
    ifa->lines = LINES ;                /* ウィンドウ:行の設定        */

/* ------------------------------------------------------------------ */
/* インフォメーション表示位置設定                                     */
/* ------------------------------------------------------------------ */
    ifa->inf_msg_x = 0 ;                /* モード表示位置(X座標)の設定*/
    ifa->inf_msg_y = ifa->lines - 1 ;   /* モード表示位置(Y座標)の設定*/

/* ------------------------------------------------------------------ */
/* コマンド行設定                                                     */
/* ------------------------------------------------------------------ */
    ifa->cur_cmd_x = 0 ;                /* コマンド位置(X座標)の設定  */
    ifa->cur_cmd_y = ifa->lines - 1 ;   /* コマンド位置(Y座標)の設定  */

/* ------------------------------------------------------------------ */
/* エラーメッセージ表示位置設定                                       */
/* ------------------------------------------------------------------ */
    ifa->err_msg_x = 0 ;                /* エラーメッセージ表示位置   */
                                        /* (X座標)の設定              */
    ifa->err_msg_y = ifa->lines - 1 ;   /* エラーメッセージ表示位置   */
                                        /* (Y座標)の設定              */

    trace_end( ifa ) ;                  /* トレース取得               */
    return ;                            /* return - win_size          */
}                                       /* end (win_size)             */

/**********************************************************************/
